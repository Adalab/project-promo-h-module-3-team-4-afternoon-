"use strict";const designContainer=document.querySelector("#designContainer"),fillInContainer=document.querySelector("#fillInContainer"),shareContainer=document.querySelector("#shareContainer"),arrowDesign=document.querySelector("#arrowDesign"),arrowFillIn=document.querySelector("#arrowFillIn"),arrowShare=document.querySelector("#arrowShare"),design=document.querySelector("#design"),fillIn=document.querySelector("#fillIn"),share=document.querySelector("#share"),palette1=document.querySelector("#fieldset__design--palette-1"),palette2=document.querySelector("#fieldset__design--palette-2"),palette3=document.querySelector("#fieldset__design--palette-3");let paletteChosen="";const userName=document.querySelector("#name"),userJob=document.querySelector("#job-title"),userEmail=document.querySelector("#email"),userTel=document.querySelector("#tel"),userLinkedin=document.querySelector("#linkedin"),userGithub=document.querySelector("#github"),createCardButton=document.querySelector("#createCardButton"),twitterContainer=document.querySelector("#twitterContainer"),twitterBtn=document.querySelector("#twitterBtn"),twitterMessage=document.querySelector("#twitterMessage"),defaultImage="./assets/images/portrait.jpg",previewCardHead=document.querySelector(".preview_card-head"),previewCardName=document.querySelector(".preview_card-name"),previewCardJob=document.querySelector(".preview_card-job"),phoneIcon=document.querySelector("#phone-icon"),emailIcon=document.querySelector("#email-icon"),linkedinIcon=document.querySelector("#linkedin-icon"),githubIcon=document.querySelector("#github-icon"),phoneItem=document.querySelector(".item_phone"),emailItem=document.querySelector(".item_email"),linkedinItem=document.querySelector(".item_linkedin"),githubItem=document.querySelector(".item_github"),iconItems=document.querySelectorAll("#preview_card-icons"),iconButtons=document.querySelectorAll(".item_btn");function hideDesign(){design.classList.toggle("hidden"),fillIn.classList.add("hidden"),share.classList.add("hidden"),arrowDesign.classList.toggle("rotate"),arrowFillIn.classList.remove("rotate"),arrowShare.classList.remove("rotate")}function toggleFillIn(){fillIn.classList.toggle("hidden"),design.classList.add("hidden"),share.classList.add("hidden"),arrowDesign.classList.remove("rotate"),arrowFillIn.classList.toggle("rotate"),arrowShare.classList.remove("rotate")}function toggleShare(){share.classList.toggle("hidden"),design.classList.add("hidden"),fillIn.classList.add("hidden"),arrowShare.classList.toggle("rotate"),arrowDesign.classList.remove("rotate"),arrowFillIn.classList.remove("rotate")}function getPalette(){localStorage.getItem("palette")?("1"===(paletteChosen=localStorage.getItem("palette"))?palette1.setAttribute("checked",!0):"2"===paletteChosen?palette2.setAttribute("checked",!0):palette3.setAttribute("checked",!0),applyPalette()):(palette1.setAttribute("checked",!0),applyPalette())}function choosePalette(){paletteChosen=event.currentTarget.value,localStorage.setItem("palette",paletteChosen),applyPalette()}function applyPalette(){palette1.checked?applyPalette1():palette2.checked?applyPalette2():palette3.checked&&applyPalette3()}function applyPalette1(){previewCardName.classList.add("darkGreenBlue"),previewCardName.classList.remove("driedBlood","slate"),previewCardHead.classList.add("borderPalette1"),previewCardHead.classList.remove("borderPalette2","borderPalette3");for(const e of iconItems)e.classList.add("darkGreenBlue"),e.classList.remove("driedBlood","slate");for(const e of iconButtons)e.style.borderColor="#a2deaf"}function applyPalette2(){previewCardName.classList.add("driedBlood"),previewCardName.classList.remove("darkGreenBlue","slate"),previewCardHead.classList.add("borderPalette2"),previewCardHead.classList.remove("borderPalette1","borderPalette3");for(const e of iconItems)e.classList.add("driedBlood"),e.classList.remove("darkGreenBlue","slate");for(const e of iconButtons)e.style.borderColor="#e95626"}function applyPalette3(){previewCardName.classList.add("slate"),previewCardName.classList.remove("driedBlood","darkGreenBlue"),previewCardHead.classList.add("borderPalette3"),previewCardHead.classList.remove("borderPalette1","borderPalette2");for(const e of iconItems)e.classList.add("slate"),e.classList.remove("driedBlood","darkGreenBlue");for(const e of iconButtons)e.style.borderColor="#a0c0cf"}function addName(){""!==userName.value?(previewCardName.innerHTML=userName.value,localStorage.setItem("name",userName.value)):(previewCardName.innerHTML="Nombre Apellido",localStorage.removeItem("name"))}function addJob(){""!==userJob.value?(previewCardJob.innerHTML=userJob.value,localStorage.setItem("job",userJob.value)):(previewCardJob.innerHTML="Front-end developer",localStorage.removeItem("job"))}function addPhone(){""!==userTel.value?(phoneIcon.href=`tel:${userTel.value}`,phoneItem.classList.remove("opacity"),localStorage.setItem("phone",userTel.value)):(phoneItem.classList.add("opacity"),localStorage.removeItem("phone"))}function addEmail(){""!==userEmail.value?(emailIcon.href=`mailto: ${userEmail.value}`,emailItem.classList.remove("opacity"),localStorage.setItem("email",userEmail.value)):(emailItem.classList.add("opacity"),localStorage.removeItem("email"))}function addLinkedin(){""!==userLinkedin.value?(linkedinIcon.href=`${userLinkedin.value}`,linkedinItem.classList.remove("opacity"),localStorage.setItem("linkedin",userLinkedin.value)):(linkedinItem.classList.add("opacity"),localStorage.removeItem("linkedin"))}function addGithub(){""!==userGithub.value?(githubIcon.href=`http://github.com/${userGithub.value}`,githubItem.classList.remove("opacity"),localStorage.setItem("github",userGithub.value)):(githubItem.classList.add("opacity"),localStorage.removeItem("github"))}function getPersData(){getPalette(),getName(),getJob(),getProfileImage(),getPhone(),getEmail(),getLinkedin(),getGithub()}function getName(){localStorage.getItem("name")?(userName.value=localStorage.getItem("name"),previewCardName.innerHTML=localStorage.getItem("name")):userName.value=""}function getJob(){localStorage.getItem("job")?(userJob.value=localStorage.getItem("job"),previewCardJob.innerHTML=localStorage.getItem("job")):userJob.value=""}function getProfileImage(){localStorage.getItem("image")?(profileImage.src=localStorage.getItem("image"),profileImage.style.backgroundImage=`url(${localStorage.getItem("image")})`,profilePreview.style.backgroundImage=`url(${localStorage.getItem("image")})`):(profilePreview.src=defaultImage,profileImage.style.backgroundImage=`url(${defaultImage})`,profilePreview.style.backgroundImage=`url(${defaultImage})`)}function getPhone(){localStorage.getItem("phone")?(userTel.value=localStorage.getItem("phone"),phoneIcon.href=`tel:${userTel.value}`,phoneItem.classList.remove("opacity")):userTel.value=""}function getEmail(){localStorage.getItem("email")?(userEmail.value=localStorage.getItem("email"),emailIcon.href=`tel:${userEmail.value}`,emailItem.classList.remove("opacity")):userEmail.value=""}function getLinkedin(){localStorage.getItem("linkedin")?(userLinkedin.value=localStorage.getItem("linkedin"),linkedinIcon.href=`tel:${userLinkedin.value}`,linkedinItem.classList.remove("opacity")):userLinkedin.value=""}function getGithub(){localStorage.getItem("github")?(userGithub.value=localStorage.getItem("github"),githubIcon.href=`tel:${userGithub.value}`,githubItem.classList.remove("opacity")):userGithub.value=""}arrowDesign.classList.add("rotate"),fillIn.classList.add("hidden"),share.classList.add("hidden"),designContainer.addEventListener("click",hideDesign),fillInContainer.addEventListener("click",toggleFillIn),shareContainer.addEventListener("click",toggleShare),twitterContainer.classList.add("hidden"),palette1.addEventListener("click",choosePalette),palette2.addEventListener("click",choosePalette),palette3.addEventListener("click",choosePalette),userName.addEventListener("keyup",addName),userJob.addEventListener("keyup",addJob),userTel.addEventListener("keyup",addPhone),userEmail.addEventListener("keyup",addEmail),userLinkedin.addEventListener("keyup",addLinkedin),userGithub.addEventListener("keyup",addGithub),window.addEventListener("load",getPersData);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){var t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,localStorage.setItem("image",fr.result)}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const reseterButton=document.querySelector("#buttonReset"),resetLocalStorage=()=>{localStorage.clear("palette"),localStorage.clear("name"),localStorage.clear("job"),localStorage.clear("image"),localStorage.clear("phone"),localStorage.clear("email"),localStorage.clear("linkedin"),localStorage.clear("github")},resetColorPalette=()=>{applyPalette1(),palette1.checked=!0},resetName=()=>{previewCardName.innerHTML="Nombre Apellido",userName.value=""},resetJob=()=>{previewCardJob.innerHTML="Front-end developer",userJob.value=""},resetImage=()=>{profileImage.style.backgroundImage=`url(${defaultImage})`,profilePreview.style.backgroundImage=`url(${defaultImage})`},resetPhone=()=>{phoneIcon.href="",userTel.value="",phoneItem.classList.add("opacity")},resetEmail=()=>{emailIcon.href="",userEmail.value="",emailItem.classList.add("opacity")},resetLinkedin=()=>{linkedinIcon.href="",userLinkedin.value="",linkedinItem.classList.add("opacity")},resetGithub=()=>{githubIcon.href="",userGithub.value="",githubItem.classList.add("opacity")},resetCardData=()=>{localStorage.clear("palette"),localStorage.clear("name"),localStorage.clear("job"),localStorage.clear("image"),localStorage.clear("phone"),localStorage.clear("email"),localStorage.clear("linkedin"),localStorage.clear("github"),applyPalette1(),palette1.checked=!0,previewCardName.innerHTML="Nombre Apellido",userName.value="",previewCardJob.innerHTML="Front-end developer",userJob.value="",profileImage.style.backgroundImage=`url(${defaultImage})`,profilePreview.style.backgroundImage=`url(${defaultImage})`,phoneIcon.href="",userTel.value="",phoneItem.classList.add("opacity"),emailIcon.href="",userEmail.value="",emailItem.classList.add("opacity"),linkedinIcon.href="",userLinkedin.value="",linkedinItem.classList.add("opacity"),githubIcon.href="",userGithub.value="",githubItem.classList.add("opacity")};function sendForm(e){e.preventDefault();const t={palette:paletteChosen,name:userName.value,job:userJob.value,phone:userTel.value,email:userEmail.value,linkedin:userLinkedin.value,github:userGithub.value,photo:fr.result};fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>showURL(e)).catch(function(e){console.log(e)})}function showURL(e){const t=document.createElement("span");e.success?(t.innerHTML=`<a class="twitter-url" href=${e.cardURL} style="color:#e17334" target="_blank">${e.cardURL}</a>`,twitterMessage.insertAdjacentElement("afterend",t),twitterContainer.classList.remove("hidden"),createCardButton.setAtributte("disabled","disabled"),shareTwitter(e.cardURL)):t.innerHTML="ERROR"+e.error}function shareTwitter(e){const t=encodeURIComponent("He creado esta tarjeta con Awesome Profile Cards. ¡Échale un vistazo!"),a=encodeURIComponent("adalab,adalaber,frontEnd,awesomeCards");twitterBtn.href=`https://twitter.com/intent/tweet?text=${t}&url=${e}&hashtags=${a}`}reseterButton.addEventListener("click",resetCardData),createCardButton.addEventListener("click",sendForm);